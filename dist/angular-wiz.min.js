/**
 * A native angular wizard directive that is HTML/CSS-compatible with the easyWizard jQuery plugin.
 * @version v0.0.1 - 2014-07-23 * @link https://github.com/danielkrainas/angular-wiz
 * @author Daniel Krainas - me@danielkrainas.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("angular-wiz.templates",["templates/step.html"]),angular.module("templates/step.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/step.html",'<li ng-class="{current: active}"><span>{{position}}</span> {{title}}</li>')}]),angular.module("angular-wiz.templates",["templates/wizard.html"]),angular.module("templates/wizard.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("templates/wizard.html",'<div>\n	<ul class="easyWizardSteps" ng-transclude></ul>\n	<div class="easyWizardWrapper">\n		<section class="step" ng-repeat="step in steps" ng-class="{active: step.active}" step-content-transclude="step"></section>\n	</div>\n	<div class="easyWizardButtons" style="clear: both;">\n		<button class="prev btn btn-default" ng-click="previous()" ng-show="canReturn">« Back</button>\n		<button class="next btn btn-default" ng-click="next()" ng-show="canContinue">Next »</button>\n		<button type="submit" class="submit btn btn-primary" ng-click="finish()" ng-show="isFinalStep">Submit</button>\n	</div>\n</div>')}]),angular.module("angular-wiz",["angular-wiz.templates"]).constant("wizardConfig",{}).controller("WizardController",["$scope",function($scope){var ctrl=this,steps=ctrl.steps=$scope.steps=[];$scope.activeIndex=0,ctrl.select=function(selectedStep){angular.forEach(steps,function(step){step.active&&step!==selectedStep&&(step.active=!1)}),$scope.canReturn=!1,$scope.canContinue=!1,$scope.isFinalStep=!1,$scope.activeIndex=steps.indexOf(selectedStep),$scope.activeIndex>0&&($scope.canReturn=!0),$scope.activeIndex==steps.length-1?$scope.isFinalStep=!0:$scope.canContinue=!0,selectedStep.active=!0},$scope.next=ctrl.next=function(){steps.length<=$scope.activeIndex+1||(steps[$scope.activeIndex+1].active=!0)},$scope.previous=ctrl.previous=function(){steps.length>1&&$scope.activeIndex>0&&(steps[$scope.activeIndex-1].active=!0)},$scope.finish=ctrl.finish=function(){$scope.isFinalStep&&"function"==typeof $scope.finished&&$scope.finished()},$scope.canReturn=!0,$scope.canContinue=!1,$scope.isFinalStep=!0,ctrl.addStep=function(step){return step.active=!1,steps.push(step),1===steps.length?step.active=!0:step.active&&ctrl.select(step),steps.length},ctrl.removeStep=function(step){var index=steps.indexOf(step);if(step.active&&steps.length>1){index=steps.length-1?index-1:index+1;var newActiveIndex=index;ctrl.select(steps[newActiveIndex])}steps.splice(index,1)}}]).directive("wizard",["wizardConfig",function(){return{restrict:"EA",replace:!0,templateUrl:function(element,attributes){return attributes.template||"templates/wizard.html"},transclude:!0,scope:{active:"=",finished:"&"},controller:"WizardController",link:function(){}}}]).directive("wizardStep",function(){return{restrict:"EA",require:"^wizard",replace:!0,transclude:!0,scope:{active:"@?",title:"@"},templateUrl:function(element,attributes){return attributes.template||"templates/step.html"},controller:function(){},compile:function($element,$attrs,$transclude){return function($scope,$element,$attrs,wizard){$scope.active=$scope.active||!1,$scope.$watch("active",function(active){active&&wizard.select($scope)}),$scope.position=wizard.addStep($scope),$scope.$on("$destroy",function(){wizard.removeStep($scope)}),$scope.$transcludeFn=$transclude}}}}).directive("stepContentTransclude",function(){return{restrict:"A",require:"^wizard",link:function($scope,$element,$attrs){var step=$scope.$eval($attrs.stepContentTransclude);step.$transcludeFn(step.$parent,function(contents){angular.forEach(contents,function(node){$element.append(node)})})}}});